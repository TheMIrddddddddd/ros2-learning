# 05 è®¢é˜…æ•°æ®å¹¶ç”¨ QT æ˜¾ç¤º

## ä¸€ã€å®Œæ•´ä»£ç 

```cpp
#include <QApplication>
#include <QLabel>
#include <QString>
#include <rclcpp/rclcpp.hpp>
#include <status_interface/msg/system_status.hpp>

using SystemStatus = status_interface::msg::SystemStatus;

class SysStatusDisplay : public rclcpp::Node
{
private:
    rclcpp::Subscription<SystemStatus>::SharedPtr subscriber_;
    QLabel *label_;

public:
    explicit SysStatusDisplay(const std::string &node_name) : Node(node_name)
    {
        // å…ˆåˆ›å»º QLabel å¯¹è±¡
        label_ = new QLabel();

        // åˆ›å»ºè®¢é˜…è€…
        subscriber_ = this->create_subscription<SystemStatus>(
            "sys_status", 10,
            [&](const SystemStatus::SharedPtr msg) -> void {
                label_->setText(get_qstr_form_msg(msg));
            }
        );

        // æ˜¾ç¤ºåˆå§‹å†…å®¹
        label_->setText(get_qstr_form_msg(std::make_shared<SystemStatus>()));
        label_->show();
    };

    QString get_qstr_form_msg(const SystemStatus::SharedPtr msg)
    {
        std::stringstream show_str;
        show_str << "===============å¯è§†åŒ–æ˜¾ç¤ºå·¥å…·===============\n"
                 << "æ•° æ® æ—¶ é—´:\t" << msg->stamp.sec << "\ts\n"
                 << "ä¸» æœº å å­—:\t" << msg->host_name << "\t\n"
                 << "CPU ä½¿ç”¨ç‡:\t" << msg->cpu_percent << "\t%\n"
                 << "å†…å­˜ ä½¿ç”¨ç‡:\t" << msg->memory_percent << "\t%\n"
                 << "å†…å­˜æ€»å¤§å°:\t" << msg->memory_total << "\tMB\n"
                 << "å‰©ä½™æœ‰æ•ˆå†…å­˜:\t" << msg->memory_available << "\tMB\n"
                 << "ç½‘ç»œå‘é€é‡:\t" << msg->net_sent << "\tMB\n"
                 << "ç½‘ç»œæ¥å—é‡:\t" << msg->net_recv << "\tMB\n"
                 << "=========================================";
        return QString::fromStdString(show_str.str());
    };
};

int main(int argc, char **argv)
{
    rclcpp::init(argc, argv);
    QApplication a(argc, argv);

    auto node = std::make_shared<SysStatusDisplay>("sys_status_display");

    // å•ç‹¬çº¿ç¨‹è¿è¡Œ ROS2 spin
    std::thread spin_thread([&]() -> void {
        rclcpp::spin(node);
    });
    spin_thread.detach();

    a.exec();  // Qt äº‹ä»¶å¾ªç¯
    return 0;
}
```

---

## äºŒã€ä»£ç é€æ®µè®²è§£

### 2.1 å¤´æ–‡ä»¶

```cpp
#include <QApplication>      // Qt åº”ç”¨ç¨‹åºçš„"å¤§è„‘"
#include <QLabel>            // Qt çš„æ ‡ç­¾æ§ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºæ–‡å­—
#include <QString>           // Qt çš„å­—ç¬¦ä¸²ç±»å‹
#include <rclcpp/rclcpp.hpp> // ROS2 çš„ C++ æ ¸å¿ƒåº“
#include <status_interface/msg/system_status.hpp>  // è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹
```

### 2.2 ç±»å‹åˆ«å

```cpp
using SystemStatus = status_interface::msg::SystemStatus;
```

ç»™é•¿åå­—èµ·ä¸ªçŸ­åå­—ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚

### 2.3 ç±»çš„ç»§æ‰¿

```cpp
class SysStatusDisplay : public rclcpp::Node
```

ç»§æ‰¿è‡ª `rclcpp::Node`ï¼Œè·å¾— ROS2 èŠ‚ç‚¹çš„æ‰€æœ‰èƒ½åŠ›ã€‚

### 2.4 ç§æœ‰æˆå‘˜

```cpp
private:
    rclcpp::Subscription<SystemStatus>::SharedPtr subscriber_;  // è®¢é˜…è€…
    QLabel *label_;  // Qt æ˜¾ç¤ºæ ‡ç­¾
```

| æˆå‘˜ | ä½œç”¨ |
|-----|-----|
| `subscriber_` | è®¢é˜…è€…ï¼Œåƒæ”¶éŸ³æœºä¸€æ ·æ¥æ”¶æ¶ˆæ¯ |
| `label_` | Qt æ ‡ç­¾ï¼Œåœ¨çª—å£ä¸Šæ˜¾ç¤ºæ–‡å­— |

### 2.5 æ„é€ å‡½æ•°

```cpp
explicit SysStatusDisplay(const std::string &node_name) : Node(node_name)
```

- `explicit`ï¼šé˜²æ­¢æ„å¤–çš„ç±»å‹è½¬æ¢
- `: Node(node_name)`ï¼šè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç»™èŠ‚ç‚¹å‘½å

**æ„é€ å‡½æ•°åšäº†ä¸‰ä»¶äº‹ï¼š**

1. åˆ›å»º QLabel å¯¹è±¡
2. åˆ›å»ºè®¢é˜…è€…ï¼Œç»‘å®šå›è°ƒå‡½æ•°
3. æ˜¾ç¤ºåˆå§‹ç•Œé¢

### 2.6 Lambda è¡¨è¾¾å¼ï¼ˆå›è°ƒå‡½æ•°ï¼‰

```cpp
[&](const SystemStatus::SharedPtr msg) -> void {
    label_->setText(get_qstr_form_msg(msg));
}
```

| éƒ¨åˆ† | å«ä¹‰ |
|-----|-----|
| `[&]` | æ•è·å¤–éƒ¨å˜é‡ï¼ˆå¦‚ `label_`ï¼‰ |
| `(...)` | å‚æ•°åˆ—è¡¨ |
| `-> void` | è¿”å›ç±»å‹ï¼ˆæ— è¿”å›å€¼ï¼‰ |
| `{ }` | å‡½æ•°ä½“ |

### 2.7 main å‡½æ•°çš„åŒå¾ªç¯

```cpp
// ROS2 å¾ªç¯ï¼šåœ¨å•ç‹¬çº¿ç¨‹ä¸­è¿è¡Œ
std::thread spin_thread([&]() -> void {
    rclcpp::spin(node);
});
spin_thread.detach();

// Qt å¾ªç¯ï¼šåœ¨ä¸»çº¿ç¨‹è¿è¡Œ
a.exec();
```

| å¾ªç¯ | ä½œç”¨ |
|-----|-----|
| `rclcpp::spin()` | ROS2 å¾ªç¯ï¼Œä¸åœæ£€æŸ¥æœ‰æ²¡æœ‰æ–°æ¶ˆæ¯ |
| `a.exec()` | Qt å¾ªç¯ï¼Œå¤„ç†çª—å£äº‹ä»¶ |

**ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªçº¿ç¨‹ï¼Ÿ** ä¸¤ä¸ªå¾ªç¯éƒ½æ˜¯é˜»å¡çš„ï¼Œå¿…é¡»åˆ†å¼€è¿è¡Œã€‚

---

## ä¸‰ã€SharedPtr æ™ºèƒ½æŒ‡é’ˆ

### 3.1 ä»€ä¹ˆæ˜¯ SharedPtrï¼Ÿ

`SharedPtr` = å…±äº«çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¼š**è‡ªåŠ¨æ¸…ç†å†…å­˜**ã€‚

```cpp
// æ™®é€šæŒ‡é’ˆï¼šéœ€è¦æ‰‹åŠ¨ delete
SystemStatus* msg = new SystemStatus();
delete msg;  // å¿…é¡»æ‰‹åŠ¨æ¸…ç†ï¼

// SharedPtrï¼šè‡ªåŠ¨æ¸…ç†
auto msg = std::make_shared<SystemStatus>();
// ä¸ç”¨ç®¡ï¼Œç”¨å®Œè‡ªåŠ¨æ¸…ç†
```

### 3.2 "Shared"ï¼ˆå…±äº«ï¼‰çš„å«ä¹‰

SharedPtr å†…éƒ¨æœ‰ä¸ª**å¼•ç”¨è®¡æ•°å™¨**ï¼š

```cpp
auto msg1 = std::make_shared<SystemStatus>();  // è®¡æ•° = 1
auto msg2 = msg1;  // è®¡æ•° = 2
auto msg3 = msg1;  // è®¡æ•° = 3

// msg3 é”€æ¯ â†’ è®¡æ•° = 2
// msg2 é”€æ¯ â†’ è®¡æ•° = 1
// msg1 é”€æ¯ â†’ è®¡æ•° = 0 â†’ è‡ªåŠ¨åˆ é™¤å¯¹è±¡ï¼
```

### 3.3 ä»€ä¹ˆæ—¶å€™ç”¨ SharedPtrï¼Ÿ

| åœºæ™¯ | ç”¨ä»€ä¹ˆ |
|-----|-------|
| ä¸´æ—¶å˜é‡ | ç›´æ¥å£°æ˜ï¼š`int x = 5;` |
| å‡½æ•°å‚æ•° | `const &` å¼•ç”¨ï¼š`void f(const Msg& m)` |
| ROS2 èŠ‚ç‚¹ | `make_shared`ï¼š`auto n = make_shared<Node>()` |
| ROS2 å›è°ƒå‚æ•° | `SharedPtr`ï¼š`const Msg::SharedPtr msg` |
| ç±»æˆå‘˜(ç®€å•) | ç›´æ¥å£°æ˜ï¼š`std::string name_;` |
| ç±»æˆå‘˜(éœ€è¦new) | æŒ‡é’ˆï¼š`QLabel* label_;` |

**åˆå­¦è€…ç§˜è¯€ï¼šå…ˆä¸ç”¨æŒ‡é’ˆï¼Œç­‰ç¼–è¯‘å™¨æŠ¥é”™æˆ– API è¦æ±‚äº†å†æ”¹æˆ SharedPtrï¼**

---

## å››ã€Publisher vs Subscriber

### 4.1 ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ

| éœ€æ±‚ | ç”¨ä»€ä¹ˆ |
|-----|-------|
| åªæ¥æ”¶æ•°æ®ï¼ˆæ˜¾ç¤º/è®°å½•ï¼‰ | Subscriber |
| åªå‘é€æ•°æ®ï¼ˆä¼ æ„Ÿå™¨/çŠ¶æ€ï¼‰ | Publisher |
| æ¥æ”¶â†’å¤„ç†â†’å‘é€ï¼ˆæ§åˆ¶å™¨ï¼‰ | ä¸¤ä¸ªéƒ½è¦ |

### 4.2 æœ¬èŠ‚ä»£ç  vs ä¹Œé¾Ÿæ§åˆ¶å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sys_status_displayï¼ˆçº¯æ˜¾ç¤ºå™¨ï¼‰                             â”‚
â”‚                                                            â”‚
â”‚  å…¶ä»–èŠ‚ç‚¹ â”€â”€(å‘å¸ƒ)â”€â”€â†’ sys_status â”€â”€(è®¢é˜…)â”€â”€â†’ æ˜¾ç¤ºçª—å£       â”‚
â”‚                                                            â”‚
â”‚  åªéœ€è¦ Subscriber                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  turtle_ctrlï¼ˆæ§åˆ¶å™¨ï¼‰                                      â”‚
â”‚                                                            â”‚
â”‚  turtlesim â”€â”€(å‘å¸ƒä½ç½®)â”€â”€â†’ æ§åˆ¶å™¨ â”€â”€(å‘å¸ƒå‘½ä»¤)â”€â”€â†’ turtlesim â”‚
â”‚                                                            â”‚
â”‚  éœ€è¦ Subscriber + Publisher                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ç”Ÿæ´»æ¯”å–»

| èŠ‚ç‚¹ç±»å‹ | æ¯”å–» |
|---------|-----|
| çº¯ Subscriber | ğŸ“º ç”µè§†æœºï¼šåªæ¥æ”¶ä¿¡å·ï¼Œæ˜¾ç¤ºç”»é¢ |
| çº¯ Publisher | ğŸ“» ç”µå°ï¼šåªå‘é€å¹¿æ’­ |
| ä¸¤è€…éƒ½æœ‰ | ğŸ® æ¸¸æˆæ‰‹æŸ„ï¼šçœ‹ç”»é¢ + å‘æŒ‡ä»¤ |

---

## äº”ã€ç¨‹åºæ‰§è¡Œæµç¨‹

```
ç¨‹åºå¯åŠ¨
    â”‚
    â”œâ”€â†’ rclcpp::init() åˆå§‹åŒ– ROS2
    â”‚
    â”œâ”€â†’ QApplication åˆå§‹åŒ– Qt
    â”‚
    â”œâ”€â†’ åˆ›å»ºèŠ‚ç‚¹ï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œï¼‰
    â”‚       â”œâ”€â†’ åˆ›å»º QLabel
    â”‚       â”œâ”€â†’ åˆ›å»º Subscriberï¼Œç»‘å®šå›è°ƒ
    â”‚       â””â”€â†’ æ˜¾ç¤ºçª—å£
    â”‚
    â”œâ”€â†’ å¼€å¯ ROS2 spin çº¿ç¨‹
    â”‚
    â”œâ”€â†’ è¿è¡Œ Qt äº‹ä»¶å¾ªç¯
    â”‚
    â””â”€â†’ æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼šå›è°ƒå‡½æ•°æ›´æ–°çª—å£æ–‡å­—
```

---

## å…­ã€CMakeLists.txt é…ç½®

### 6.1 å®Œæ•´é…ç½®æ–‡ä»¶

```cmake
cmake_minimum_required(VERSION 3.8)
project(status_display)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# æ‰¾ä¾èµ–
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(status_interface REQUIRED)
find_package(Qt6 REQUIRED COMPONENTS Widgets)

# åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶
add_executable(hello_qt src/hello_qt.cpp)
add_executable(sys_status_display src/sys_status_display.cpp)

# é“¾æ¥åº“
target_link_libraries(hello_qt Qt6::Widgets)
target_link_libraries(sys_status_display Qt6::Widgets)

ament_target_dependencies(sys_status_display rclcpp status_interface)

# å®‰è£…
install(TARGETS hello_qt sys_status_display
  DESTINATION lib/${PROJECT_NAME}
)

ament_package()
```

### 6.2 target_link_libraries â€”â€” é“¾æ¥æ™®é€šåº“

```cmake
target_link_libraries(<ç›®æ ‡å> <åº“1> <åº“2> ...)
```

**ä½œç”¨**ï¼šæŠŠç¼–è¯‘å¥½çš„åº“é“¾æ¥åˆ°ä½ çš„ç¨‹åºã€‚

```cmake
target_link_libraries(sys_status_display Qt6::Widgets)
#                     â†‘                  â†‘
#                     ç›®æ ‡å              è¦é“¾æ¥çš„åº“
```

| å‚æ•° | å«ä¹‰ |
|-----|-----|
| `sys_status_display` | å¯æ‰§è¡Œæ–‡ä»¶åï¼ˆadd_executable å®šä¹‰çš„ï¼‰ |
| `Qt6::Widgets` | Qt6 çš„ Widgets æ¨¡å— |

**å¤šä¸ªåº“çš„å†™æ³•**ï¼š

```cmake
target_link_libraries(my_app
    Qt6::Widgets
    Qt6::Core
    pthread
)
```

**é€‚ç”¨åœºæ™¯**ï¼šé“¾æ¥é ROS2 çš„åº“ï¼ˆQtã€OpenCVã€Eigen ç­‰ï¼‰

### 6.3 ament_target_dependencies â€”â€” ROS2 ä¸“ç”¨

```cmake
ament_target_dependencies(<ç›®æ ‡å> <ä¾èµ–1> <ä¾èµ–2> ...)
```

**ä½œç”¨**ï¼šé“¾æ¥ ROS2 åŒ…çš„ä¾èµ–ï¼Œè‡ªåŠ¨å¤„ç†å¤´æ–‡ä»¶è·¯å¾„å’Œåº“æ–‡ä»¶ã€‚

```cmake
ament_target_dependencies(sys_status_display rclcpp status_interface)
#                         â†‘                  â†‘      â†‘
#                         ç›®æ ‡å              ROS2åŒ…  è‡ªå®šä¹‰æ¶ˆæ¯åŒ…
```

| å‚æ•° | å«ä¹‰ |
|-----|-----|
| `sys_status_display` | å¯æ‰§è¡Œæ–‡ä»¶å |
| `rclcpp` | ROS2 çš„ C++ å®¢æˆ·ç«¯åº“ |
| `status_interface` | è‡ªå®šä¹‰çš„æ¶ˆæ¯åŒ… |

**æ¯” target_link_libraries å¥½åœ¨å“ªï¼Ÿ**

```cmake
# å¦‚æœç”¨ target_link_librariesï¼Œéœ€è¦å†™å¾ˆå¤šï¼š
target_link_libraries(my_node ${rclcpp_LIBRARIES})
target_include_directories(my_node PUBLIC ${rclcpp_INCLUDE_DIRS})

# ç”¨ ament_target_dependenciesï¼Œä¸€è¡Œæå®šï¼
ament_target_dependencies(my_node rclcpp std_msgs)
```

**é€‚ç”¨åœºæ™¯**ï¼šé“¾æ¥ ROS2 ç›¸å…³çš„åŒ…

### 6.4 install â€”â€” å®‰è£…æ–‡ä»¶

```cmake
install(TARGETS <ç›®æ ‡1> <ç›®æ ‡2> ...
    DESTINATION <å®‰è£…è·¯å¾„>
)
```

**ä½œç”¨**ï¼šæŠŠç¼–è¯‘å¥½çš„ç¨‹åºå®‰è£…åˆ°æŒ‡å®šä½ç½®ï¼Œè®© `ros2 run` èƒ½æ‰¾åˆ°ã€‚

```cmake
install(TARGETS hello_qt sys_status_display
#       â†‘       â†‘        â†‘
#       ç±»å‹    ç›®æ ‡1     ç›®æ ‡2
    DESTINATION lib/${PROJECT_NAME}
#   â†‘           â†‘
#   å®‰è£…åˆ°å“ªé‡Œ   è·¯å¾„ï¼ˆlib/status_display/ï¼‰
)
```

**å®‰è£…åçš„ç›®å½•ç»“æ„**ï¼š

```
install/
â””â”€â”€ status_display/
    â””â”€â”€ lib/
        â””â”€â”€ status_display/
            â”œâ”€â”€ hello_qt
            â””â”€â”€ sys_status_display
```

**å…¶ä»–å¸¸è§çš„ install ç”¨æ³•**ï¼š

```cmake
# å®‰è£… launch æ–‡ä»¶
install(DIRECTORY launch/
    DESTINATION share/${PROJECT_NAME}/launch
)

# å®‰è£…é…ç½®æ–‡ä»¶
install(DIRECTORY config/
    DESTINATION share/${PROJECT_NAME}/config
)
```

### 6.5 ä¸‰è€…å¯¹æ¯”æ€»ç»“

| å‘½ä»¤ | ç”¨é€” | é€‚ç”¨åº“ |
|-----|-----|-------|
| `target_link_libraries` | é“¾æ¥æ™®é€šåº“ | Qtã€OpenCVã€Eigen ç­‰ |
| `ament_target_dependencies` | é“¾æ¥ ROS2 åŒ… | rclcppã€std_msgs ç­‰ |
| `install` | å®‰è£…åˆ°æŒ‡å®šä½ç½® | è®© ros2 run èƒ½æ‰¾åˆ° |

### 6.6 CMakeLists ç¼–å†™æµç¨‹

```
find_package(...)           # 1. æ‰¾åˆ°ä¾èµ–
       â†“
add_executable(...)         # 2. å®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶
       â†“
target_link_libraries(...)  # 3. é“¾æ¥éROS2åº“
       â†“
ament_target_dependencies(...)  # 4. é“¾æ¥ROS2åŒ…
       â†“
install(...)                # 5. å®‰è£…åˆ°æ­£ç¡®ä½ç½®
       â†“
ament_package()             # 6. æ”¶å°¾ï¼ˆå¿…é¡»æœ‰ï¼‰
```

### 6.7 é€Ÿè®°æ¨¡æ¿

```cmake
# æ‰¾ä¾èµ–
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(è‡ªå®šä¹‰æ¶ˆæ¯åŒ… REQUIRED)
find_package(Qt6 REQUIRED COMPONENTS Widgets)

# åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶
add_executable(èŠ‚ç‚¹å src/æºæ–‡ä»¶.cpp)

# é“¾æ¥åº“
target_link_libraries(èŠ‚ç‚¹å Qt6::Widgets)          # éROS2çš„åº“
ament_target_dependencies(èŠ‚ç‚¹å rclcpp æ¶ˆæ¯åŒ…)     # ROS2çš„åŒ…

# å®‰è£…
install(TARGETS èŠ‚ç‚¹å
    DESTINATION lib/${PROJECT_NAME}
)

ament_package()
```

---

## ä¸ƒã€å¸¸è§é”™è¯¯ä¸è§£å†³

| é”™è¯¯ | åŸå›  | è§£å†³ |
|-----|-----|-----|
| `no matching function for call to 'SysStatusDisplay::SysStatusDisplay()'` | `make_shared` æ²¡ä¼ å‚æ•° | ä¼ å…¥èŠ‚ç‚¹åç§° |
| `QApplication: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•` | æ²¡é“¾æ¥ Qt åº“ | CMakeLists æ·»åŠ  `target_link_libraries` |
| `Segmentation fault` | æŒ‡é’ˆæœªåˆå§‹åŒ–å°±ä½¿ç”¨ | å…ˆ `new` åˆ›å»ºå¯¹è±¡ |
| `ConstPtr is deprecated` | ç”¨äº†åºŸå¼ƒçš„ç±»å‹ | æ”¹ç”¨ `SharedPtr` |

---

## å…«ã€æ€»ç»“

1. **Qt + ROS2 ç»“åˆ**ï¼šéœ€è¦ä¸¤ä¸ªäº‹ä»¶å¾ªç¯ï¼Œç”¨å¤šçº¿ç¨‹è§£å†³
2. **SharedPtr**ï¼šROS2 å¹¿æ³›ä½¿ç”¨çš„æ™ºèƒ½æŒ‡é’ˆï¼Œè‡ªåŠ¨ç®¡ç†å†…å­˜
3. **Subscriber**ï¼šç”¨äºæ¥æ”¶è¯é¢˜æ¶ˆæ¯ï¼Œé€‚åˆçº¯æ¶ˆè´¹æ•°æ®çš„åœºæ™¯
4. **Publisher**ï¼šç”¨äºå‘é€è¯é¢˜æ¶ˆæ¯ï¼Œéœ€è¦è¾“å‡ºæ•°æ®æ—¶ä½¿ç”¨
5. **Lambda è¡¨è¾¾å¼**ï¼šç®€æ´çš„å›è°ƒå‡½æ•°å†™æ³•ï¼Œ`[æ•è·](å‚æ•°) { å‡½æ•°ä½“ }`
